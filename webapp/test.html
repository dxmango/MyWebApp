<!DOCTYPE html>
<html lang="en">
  <head>
    <title>My Web App</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <link rel="stylesheet" href="normalize.css">
    <link rel="stylesheet" href="style.css">
    <link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </head>
</body>
<h2>AJAX</h2>
<input id="email" type="email" required autocomplete="off"/>


<button type="button" onclick="loadDoc()">Request data</button>

<p id="demo"></p>
<p id="demo1"></p>
<script>

function loadDoc() {
  var email = document.getElementById("email").value;
  document.getElementById("demo1").innerHTML = email;
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
      myFunction(xmlhttp);
    }
  };
  xmlhttp.open("POST", "http://localhost:8080/MySQLService/create-new-account?password=120&email="+email+"&lastname=du&firstname=xin", true);
  xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xmlhttp.send();
}
function myFunction(xmlhttp) {
    var myArr = JSON.parse(xmlhttp.responseText);
    var i;
    if(myArr.isSucceed){
       i = "good";
    }
    document.getElementById("demo").innerHTML = i;
    alert("Your account has been successfully created");
    window.location.replace("#demo");
}
</script>

<body>
</body>
</html>
