<!DOCTYPE html>
<html lang="en">
  <head>
    <title>My Web App</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="mystyle.css">

    <link rel="stylesheet" type="text/css" href="dropdown.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <script>
      var maxHeight = 400;

      $(function(){

          $(".dropdown > li").hover(function() {

               var $container = $(this),
                   $list = $container.find("ul"),
                   $anchor = $container.find("a"),
                   height = $list.height() * 1.1,       // make sure there is enough room at the bottom
                   multiplier = height / maxHeight;     // needs to move faster if list is taller

              // need to save height here so it can revert on mouseout
              $container.data("origHeight", $container.height());

              // so it can retain it's rollover color all the while the dropdown is open
              $anchor.addClass("hover");

              // make sure dropdown appears directly below parent list item
              $list
                  .show()
                  .css({
                      paddingTop: $container.data("origHeight")
                  });

              // don't do any animation if list shorter than max
              if (multiplier > 1) {
                  $container
                      .css({
                          height: maxHeight,
                          overflow: "hidden"
                      })
                      .mousemove(function(e) {
                          var offset = $container.offset();
                          var relativeY = ((e.pageY - offset.top) * multiplier) - ($container.data("origHeight") * multiplier);
                          if (relativeY > $container.data("origHeight")) {
                              $list.css("top", -relativeY + $container.data("origHeight"));
                          };
                      });
              }

          }, function() {

              var $el = $(this);

              // put things back to normal
              $el
                  .height($(this).data("origHeight"))
                  .find("ul")
                  .css({ top: 0 })
                  .hide()
                  .end()
                  .find("a")
                  .removeClass("hover");
          });
      });
    </script>


  </head>

    <body id = "top">
      <header>
        <nav class="navbar navbar-default navbar-fixed-top">
          <div class="container-fluid">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">SEATTLE ADS</a>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
              <ul class="nav navbar-nav navbar-right">
                <li><a href="index.html">HOME</a></li>
                <li><a href="postAd.html">POST ADS</a></li>
                <li class="active"><a href="findAd.html">FIND ADS</a></li>
                <li><a href="register.html">SIGN IN/ SIGN UP</a></li>
                <li class="dropdown">
                  <a class="dropdown-toggle" data-toggle="dropdown" href="#">MORE
                    <span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu">
                    <li><a href="profile.html" target="view_window">Profile</a></li>
                    <li><a href="index.html#contact">Contact Website</a></li>
                    <li><a href="index.html" onclick="eraseCookie('username')">Log out</a></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </header>

  <h1>Select what you want:</h1>
  <div class="container-fluid">
  <nav id="dropnav">
  <ul class="dropdown">
    <li class="drop"><a href="#">JOB</a>
      <ul id="JobsUL" class="sub_menu">
        <li><a href="#" onclick="findAds('Jobs', 'Accounting')">Accounting</a></li>
        <li><a href="#" onclick="findAds('Jobs', 'Architecture')">Architecture</a></li>
        <li><a href="#" onclick="findAds('Jobs', 'Art')">Art</a></li>
        <li><a href="#" onclick="findAds('Jobs', 'Biotech')">Biotech</a></li>
        <li><a href="#" onclick="findAds('Jobs', 'Business')">Business</a></li>
        <li><a href="#" onclick="findAds('Jobs', 'Chemistry')">Chemistry</a></li>
        <li><a href="#" onclick="findAds('Jobs', 'Computer engineering')">Computer engineering</a></li>
        <li><a href="#" onclick="findAds('Jobs', 'Education')">Education</a></li>
        <li><a href="#" onclick="findAds('Jobs', 'Food')">Food</a></li>
        <li><a href="#" onclick="findAds('Jobs', 'Human resource')">Human resource</a></li>
        <li><a href="#" onclick="findAds('Jobs', 'Machinery')">Machinery</a></li>
				<li><a href="#" onclick="findAds('Jobs', 'Marketing')">Marketing</a></li>
				<li><a href="#" onclick="findAds('Jobs', 'Sale')">Sale</a></li>
      </ul>
  	</li>
  	<li class="drop"><a href="#">House</a>
  		<ul class="sub_menu">
  			<li><a href="#" onclick="findAds('House', 'Apartment for rent')">Apartment for rent</a></li>
        <li><a href="#" onclick="findAds('House', 'Apartment for sale')">Apartment for sale</a></li>
				<li><a href="#" onclick="findAds('House', 'House for rent')">House for rent</a></li>
				<li><a href="#" onclick="findAds('House', 'House for sale')">House for sale</a></li>
				<li><a href="#" onclick="findAds('House', 'Clean Service')">Clean Service</a></li>
				<li><a href="#" onclick="findAds('House', 'Clean Service')">Repair service</a></li>
  		</ul>
  	</li>
  	<li class="drop"><a href="#">Electronics</a>
  		<ul class="sub_menu">
  			<li><a href="#" onclick="findAds('Electronics', 'New iphone for sale')">New iphone for sale</a></li>
				<li><a href="#" onclick="findAds('Electronics', 'Used iphone for sale')">Used iphone for sale</a></li>
        <li><a href="#" onclick="findAds('Electronics', 'New ipad for sale')">New ipad for sale</a></li>
				<li><a href="#" onclick="findAds('Electronics', 'Used ipad for sale')">Used ipad for sale</a></li>
        <li><a href="#" onclick="findAds('Electronics', 'New computer for sale')">New computer for sale</a></li>
				<li><a href="#" onclick="findAds('Electronics', 'Used computer for sale')">Used computer for sale</a></li>
        <li><a href="#" onclick="findAds('Electronics', 'Clean Service')">Clean Service</a></li>
        <li><a href="#" onclick="findAds('Electronics', 'Repair service')">Repair service</a></li>
  		</ul>
  	</li>
    <li class="drop"><a href="#">Merchandise</a>
  		<ul class="sub_menu">
  			<li><a href="#" onclick="findAds('Merchandise', 'Clothes')">Clothes</a></li>
				<li><a href="#" onclick="findAds('Merchandise', 'Shoes')">Shoes</a></li>
				<li><a href="#" onclick="findAds('Merchandise', 'Foods')">Foods</a></li>
				<li><a href="#" onclick="findAds('Merchandise', 'Drinks')">Drinks</a></li>
				<li><a href="#" onclick="findAds('Merchandise', 'Groceries')">Groceries</a></li>
  		</ul>
  	</li>
    <li class="drop"><a href="#">Restuarant</a>
  		<ul class="sub_menu">
  			<li><a href="#" onclick="findAds('Restuarant', 'American food')">American food</a></li>
        <li><a href="#" onclick="findAds('Restuarant', 'Mexican food')">Mexican food</a></li>
				<li><a href="#" onclick="findAds('Restuarant', 'Chinese food')">Chinese food</a></li>
				<li><a href="#" onclick="findAds('Restuarant', 'Tai food')">Tai food</a></li>
				<li><a href="#" onclick="findAds('Restuarant', 'Koran food')">Koran food</a></li>
  		</ul>
  	</li>
    <li class="drop"><a href="#">Resorts</a>
  		<ul class="sub_menu">
  			<li><a href="#" onclick="findAds('Resorts', 'Space Needle')">Space Needle</a></li>
        <li><a href="#" onclick="findAds('Resorts', 'University of Washington')">University of Washington</a></li>
				<li><a href="#" onclick="findAds('Resorts', 'Ride the Duck')">Ride the Duck</a></li>
  		</ul>
  	</li>
  </ul>
  </nav>
</div>


<div class="container">
<p id="table"></p>
</div>
<script>
function findAds(Table, Category) {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        myFunction(xmlhttp);
      }
    };
    //xmlhttp.open("POST", "http://localhost:8080/MySQLService/FindAds?Table="+ Table + "&Category="+ Category, true);
    xmlhttp.open("POST", "http://www.xinducrystal.com:8080/MySQLService/FindAds?Table="+ Table + "&Category="+ Category, true);
    xmlhttp.send();
}

function myFunction(xmlhttp) {

    var myArr = JSON.parse(xmlhttp.responseText);
    if(myArr.succeed){
        var table = "<table><tr><th width='15%'>Post User</th><th width='15%'>Category</th><th width='35%'>Contents</th><th width='15%'>Contact Email</th><th width='10%'>Contact Cell</th><th width='10%'>Post Date</th></tr>";
        for(var i = 0; i < Object.keys(myArr.information).length;i++){
            table += "<tr><td>"+myArr.information[i].postEmail+"</td>"+
            "<td>"+ myArr.information[i].category+"</td>"+
            "<td>"+myArr.information[i].contents+"</td>"+
            "<td>"+myArr.information[i].contactEmail+"</td>"+
            "<td>"+myArr.information[i].contactCell+"</td>"+
            "<td>"+myArr.information[i].postDate+"</td></tr>";
        }
        table += "</table>";
       document.getElementById("table").innerHTML = table;

    }else{
        document.getElementById("p").innerHTML = "No records, please change your selection.";
    }
}
function eraseCookie(name) {
  document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
}
</script>

</body>
</html>
